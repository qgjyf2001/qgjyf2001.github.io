{"version":3,"sources":["App.js","index.js"],"names":["Dragger","Upload","App","Typography","Title","useState","code","setCode","useEffect","document","title","script","createElement","type","async","src","head","appendChild","props","name","multiple","action","file","reader","FileReader","readAsArrayBuffer","onload","ctx","Uint8Array","result","inBuffer","len","ptr","window","Module","_malloc","HEAPU8","buffer","mallocByteBuffer","byteLength","set","cwrap","luaDec","byteOffset","_free","Promise","resolve","reject","onChange","info","status","console","log","fileList","message","success","error","onDrop","e","className","InboxOutlined","value","options","mode","theme","autofocus","styleActiveLine","lineNumbers","smartIndent","lineWrapping","foldGutter","gutters","ReactDOM","render","StrictMode","getElementById"],"mappings":"sUA2BOA,EAASC,IAATD,QAmFQE,GAlFGC,IAAVC,MAEG,WACT,MAAqBC,mBAAS,IAA9B,mBAAOC,EAAP,KAAYC,EAAZ,KACAC,qBACE,WACEC,SAASC,MAAM,uGACf,IAAIC,EAASF,SAASG,cAAc,UACtCD,EAAOE,KAAO,kBACdF,EAAOG,OAAQ,EACfH,EAAOI,IAAM,YACbN,SAASO,KAAKC,YAAYN,KAC1B,IAEJ,IAAMO,EAAQ,CACZC,KAAM,OACNC,UAAU,EACVC,OAAO,SAACC,GACN,IAAIC,EAAS,IAAIC,WAgBjB,OAfAD,EAAOE,kBAAkBH,GACzBC,EAAOG,OAAS,WACZ,IAKgBC,EAAM,IAAIC,WAAWL,EAAOM,QAC1BC,EANO,SAACC,GACV,IAAMC,EAAMC,OAAOC,OAAOC,QAAQJ,GAElC,OADkB,IAAIH,WAAWK,OAAOC,OAAOE,OAAOC,OAAQL,EAAKD,GAItDO,CAAiBf,EAAOM,OAAOU,YAChDT,EAASU,IAAIb,GACb,IACIE,EADWI,OAAOC,OAAOO,MAAM,SAAU,SAAU,CAAC,SAAU,UACvDC,CAAOZ,EAASa,WAAWb,EAASS,YAC/ChC,EAAQsB,GACRI,OAAOC,OAAOU,MAAMd,IAE7B,IAAIe,SAAQ,SAACC,EAASC,QAI/BC,SAAS,SAACC,GACR,IAAQC,EAAWD,EAAK3B,KAAhB4B,OACO,cAAXA,GACFC,QAAQC,IAAIH,EAAK3B,KAAM2B,EAAKI,UAEf,SAAXH,GACFI,IAAQC,QAAR,UAAmBN,EAAK3B,KAAKH,KAA7B,iCACAgC,QAAQC,IAAIH,EAAK3B,OACG,UAAX4B,GACTI,IAAQE,MAAR,UAAiBP,EAAK3B,KAAKH,KAA3B,0BAGJsC,OAAO,SAACC,MAKR,OACE,eAAC,IAAD,WACA,eAAC1D,EAAD,2BAAakB,GAAb,cACA,mBAAGyC,UAAU,uBAAb,SACE,cAACC,EAAA,EAAD,MAEF,mBAAGD,UAAU,kBAAb,2DACA,mBAAGA,UAAU,kBAAb,0FAIF,cAAC,eAAD,CACQE,MAAOvD,EACPwD,QAAS,CACTC,KAAM,CAAC5C,KAAK,cACZ6C,MAAO,iBACPC,WAAU,EACVC,iBAAgB,EAChBC,aAAa,EACbC,aAAY,EAEZC,cAAa,EACbC,YAAW,EACXC,QAAQ,CAAC,yBAAyB,iC,cCrG5CC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFjE,SAASkE,eAAe,W","file":"static/js/main.c0b2867a.chunk.js","sourcesContent":["import {useState,useEffect} from 'react';\nimport { message,Card,Upload,Typography} from 'antd';\nimport {UnControlled as CodeMirror} from 'react-codemirror2'\nimport 'codemirror/lib/codemirror.js'\nimport 'codemirror/lib/codemirror.css';\n// 主题风格\nimport 'codemirror/theme/solarized.css';\n// 代码模式，clike是包含java,c++等模式的\nimport 'codemirror/mode/clike/clike';\nimport 'codemirror/mode/css/css';\nimport 'codemirror/mode/lua/lua';\n\n//ctrl+空格代码提示补全\nimport 'codemirror/addon/hint/show-hint.css';\nimport 'codemirror/addon/hint/show-hint';\nimport 'codemirror/addon/hint/anyword-hint.js';\n//代码高亮\nimport 'codemirror/addon/selection/active-line';\n//折叠代码\nimport 'codemirror/addon/fold/foldgutter.css';\nimport 'codemirror/addon/fold/foldcode.js';\nimport 'codemirror/addon/fold/foldgutter.js';\nimport 'codemirror/addon/fold/brace-fold.js';\nimport 'codemirror/addon/fold/comment-fold.js';\nimport 'codemirror/addon/edit/closebrackets';\nimport { InboxOutlined} from '@ant-design/icons';\n\nconst {Dragger}=Upload;\nconst { Title } = Typography;\n\nconst App =function (){ \n  const [code,setCode]=useState(\"\")\n  useEffect(\n    ()=>{  \n      document.title='lua字节码在线反编译（目前只支持lua-5.3）'\n      let script = document.createElement('script')\n    script.type = 'text/javascript'\n    script.async = true\n    script.src = 'luadec.js'\n    document.head.appendChild(script)},\n    []\n  );\nconst props = {\n  name: 'file',\n  multiple: false,\n  action:(file)=>{\n    var reader = new FileReader(); //读取操作就是由它完成.\n    reader.readAsArrayBuffer(file)\n    reader.onload = function() {\n        const mallocByteBuffer = (len) => {\n                        const ptr = window.Module._malloc(len)\n                        const heapBytes = new Uint8Array(window.Module.HEAPU8.buffer, ptr, len)\n                        return heapBytes\n                    }\n                    var ctx = new Uint8Array(reader.result)  \n                    const inBuffer = mallocByteBuffer(reader.result.byteLength)\n                    inBuffer.set(ctx)\n                    const luaDec = window.Module.cwrap('luaDec', 'string', ['number', 'number'])         \n                    var result=luaDec(inBuffer.byteOffset,inBuffer.byteLength);\n                    setCode(result)        \n                    window.Module._free(inBuffer);\n    }\n    return new Promise((resolve, reject) => {\n\n    });\n  },\n  onChange:(info)=> {\n    const { status } = info.file;\n    if (status !== 'uploading') {\n      console.log(info.file, info.fileList);\n    }\n    if (status === 'done') {\n      message.success(`${info.file.name} file uploaded successfully.`);\n      console.log(info.file)\n    } else if (status === 'error') {\n      message.error(`${info.file.name} file upload failed.`);\n    }\n  },\n  onDrop:(e)=>{\n    //console.log('Dropped files', e.dataTransfer.files);\n  },\n};\n\n  return (\n    <Card>\n    <Dragger {...props}>\n    <p className=\"ant-upload-drag-icon\">\n      <InboxOutlined />\n    </p>\n    <p className=\"ant-upload-text\">上传lua二进制文件</p>\n    <p className=\"ant-upload-hint\">\n    点击此处或拖动文件到此处\n    </p>\n  </Dragger>\n  <CodeMirror\n          value={code}\n          options={{\n          mode: {name:'text/x-lua'},\n          theme: 'solarized dark',\n          autofocus:true,//自动获取焦点\n          styleActiveLine:true,//光标代码高亮\n          lineNumbers: true, //显示行号\n          smartIndent:true,  //自动缩进\n          //start-设置支持代码折叠\n          lineWrapping:true,\n          foldGutter:true,\n          gutters:['CodeMirror-linenumbers','CodeMirror-foldgutter'],//end\n         }}/>  \n      </Card>)\n  }\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'antd/dist/antd.css'\nimport '@ant-design/pro-list/dist/list.css'\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}